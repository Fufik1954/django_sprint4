{% extends "base.html" %}
{% block title %}Профиль @{{ profile.username }}{% endblock %}
{% block content %}
<div class="row justify-content-center">
  <div class="col-lg-8">
    <div class="card mb-4">
      <div class="card-body text-center">
        <div class="mb-3">
          <span class="avatar bg-primary text-white rounded-circle p-3" style="font-size: 2rem;">
            {{ profile.username|first|upper }}
          </span>
        </div>
        <h2 class="card-title">@{{ profile.username }}</h2>

        <div class="d-flex flex-wrap justify-content-center gap-3 mb-3">
          <div class="badge bg-light text-dark">
            <i class="bi bi-person"></i>
            {% if profile.get_full_name %}
              {{ profile.get_full_name }}
            {% else %}
              Имя не указано
            {% endif %}
          </div>
          <div class="badge bg-light text-dark">
            <i class="bi bi-calendar"></i>
            Зарегистрирован: {{ profile.date_joined|date:"d.m.Y" }}
          </div>
          <div class="badge bg-light text-dark">
            <i class="bi bi-star"></i>
            {% if profile.is_staff %}Администратор{% else %}Пользователь{% endif %}
          </div>
        </div>

        {% if user.is_authenticated and user == profile %}
        <div class="d-flex justify-content-center gap-2 mb-4">
          <a href="{% url 'blog:profile_edit' profile.username %}" class="btn btn-outline-primary">
            <i class="bi bi-pencil"></i> Редактировать профиль
          </a>
          <a href="{% url 'password_change' %}" class="btn btn-outline-secondary">
            <i class="bi bi-key"></i> Сменить пароль
          </a>
        </div>
        {% endif %}
      </div>
    </div>

    <h3 class="mb-4 text-center">
      <i class="bi bi-newspaper"></i> Публикации пользователя
    </h3>

    {% for post in page_obj %}
      {% include "includes/post_card.html" %}
    {% empty %}
      <div class="card">
        <div class="card-body text-center text-muted">
          <i class="bi bi-info-circle" style="font-size: 2rem;"></i>
          <p class="mt-2 mb-0">Пользователь пока не опубликовал ни одной записи</p>
        </div>
      </div>
    {% endfor %}

    {% include "includes/paginator.html" %}
  </div>
</div>
{% endblock %}